<!-- expense_form.html -->
<div class="modal fade" id="expenseModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title fw-semibold">Thêm chi tiêu</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <form id="expenseForm" autocomplete="off">
          <!-- Mô tả -->
          <div class="mb-3">
            <label class="form-label fw-medium">Nội dung chi tiêu</label>
            <input
              type="text"
              id="expenseDesc"
              name="desc"
              class="form-control"
              placeholder="Nhập mô tả..."
              required
            />
            <div id="aiCatSuggest" class="mt-2"></div>
          </div>

          <!-- Số tiền -->
          <div class="mb-3">
            <label class="form-label fw-medium">Số tiền</label>
            <input
              type="number"
              id="expenseAmount"
              name="amount"
              class="form-control"
              placeholder="0"
              required
            />
          </div>

          <!-- Ngày giao dịch -->
          <div class="mb-3">
            <label class="form-label fw-medium">Ngày</label>
            <div class="input-group">
              <input
                type="text"
                id="expenseDate"
                name="date"
                class="form-control"
                placeholder="dd/mm/yyyy"
                required
              />
              <button
                id="btnOpenExpenseCalendar"
                class="btn btn-outline-secondary"
                type="button"
              >
                <i class="bi bi-calendar-event"></i>
              </button>
            </div>
          </div>

          <!-- Danh mục -->
          <div class="mb-3">
            <label class="form-label fw-medium">Danh mục chi tiêu</label>
            <select
              id="expenseCategory"
              name="category_id"
              class="form-select"
              required
            >
              <option value="">-- Chọn danh mục --</option>
            </select>
          </div>

          <!-- Phương thức thanh toán -->
          <div class="mb-3">
            <label class="form-label fw-medium">Phương thức thanh toán</label>
            <select
              id="expensePaymentMethod"
              name="payment_method_id"
              class="form-select"
              required
            >
              <option value="">-- Chọn phương thức --</option>
            </select>
          </div>

          <!-- Upload Hóa đơn -->
          <div class="mb-3">
            <label class="form-label fw-medium">Ảnh hóa đơn (tùy chọn)</label>
            <div class="d-flex gap-3 align-items-center">
              <button
                id="btnUploadReceiptInModal"
                class="btn btn-outline-secondary"
                type="button"
              >
                <i class="bi bi-upload"></i> Tải ảnh lên
              </button>

              <input
                type="file"
                id="expenseReceiptHidden"
                accept="image/*"
                class="d-none"
              />
            </div>

            <!-- Preview -->
            <div id="extReceiptPreview" class="d-none mt-3"></div>
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button
          type="submit"
          form="expenseForm"
          class="btn btn-primary fw-semibold"
          id="expenseSubmitBtn"
        >
          Lưu chi tiêu
        </button>
      </div>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='js/expense_form.js') }}"></script>
